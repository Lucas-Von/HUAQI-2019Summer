<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="financial_management.data.product.DepositMapper">
    <select id="selectAllProducts" resultMap="DepositProduct">
        select * from deposit_product;
    </select>

    <select id="selectSelfProducts" resultMap="MyProducts">
        select md.user_id,
            md.amount,
            md.maturity,
            md.product_id,
            dp.name,
            dp.type,
            dp.rate
        from my_depo md
        inner join deposit_product dp
        on md.product_id = dp.id
        where md.user_id = #{userId}
    </select>

    <select id="selectProductByName" resultMap="DepositProduct">
        select * from deposit_product where name=#{name}
    </select>

    <insert id="insertMyProduct" parameterType="financial_management.entity.MyDepoPO">
        insert  into my_depo (user_id, product_id, amount, maturity) values (#{userId},#{productId},#{amount},#{maturity})
    </insert>

    <resultMap id="DepositProduct" type="financial_management.entity.DepositProductPO">
        <id property="id" column="id"/>
        <result property="length" column="length"/>
        <result property="name" column="name"/>
        <result property="rate" column="rate"/>
        <result property="type" column="type"/>
    </resultMap>

    <resultMap id="MyProducts" type="financial_management.entity.MyDepoPO">
        <result column="user_id" property="userId"/>
        <result column="product_id" property="productId"/>
        <result column="amount" property="amount"/>
        <result column="maturity" property="maturity"/>
        <result column="type" property="type"/>
        <result column="name" property="name"/>
        <result column="rate" property="rate"/>
    </resultMap>

</mapper>